import{vlElement}from"/node_modules/vl-ui-core/dist/vl-core.min.js";export class VlMapAction extends(vlElement(HTMLElement)){connectedCallback(){this.__defineLayer(),this.__registerMapActionChangedCallback()}static isVlMapAction(){return!0}static get NEW_ACTION_EVENT_NAME(){return"new-action-activated"}get style(){return this._style}set style(t){this._style=t}get layer(){return this._layer}set layer(t){this._layer=t,this._layerChangedCallback()}get action(){return this._action}get _mapElement(){return this.closest("vl-map")}get _layerElement(){return this.closest("vl-map-layer")}get _active(){return this.hasAttribute("default-active")}get _map(){if(this._mapElement)return this._mapElement.map}get _callback(){return t=>this.__callback?this.__callback(t):null}activate(){this.action&&(this._map.activateAction(this.action),this.actionChanged())}actionChanged(){const t=new Event(VlMapAction.NEW_ACTION_EVENT_NAME);this._mapElement.dispatchEvent(t)}_layerChangedCallback(){this._mapElement.ready.then((()=>{if(this.layer){const t=this._createAction(this.layer);t&&(this._mapElement.addAction(t),this.actionChanged(),this._active&&t.activate(),this._action=t)}}))}_createAction(){console.log("implementatie van _createAction ontbreekt")}__registerMapActionChangedCallback(){this._mapElement.addEventListener(VlMapAction.NEW_ACTION_EVENT_NAME,(()=>{this.setAttribute("active",this._map&&this._map.currentAction==this.action)}))}__defineLayer(){this._layerElement&&(this.layer=this._layerElement.layer)}}
