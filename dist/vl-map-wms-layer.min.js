import{VlMapLayer}from"/node_modules/vl-ui-map/dist/vl-map-layer.min.js";import"/node_modules/vl-ui-map/dist/vl-map-wms-style.min.js";export class VlMapWmsLayer extends VlMapLayer{constructor(e,t){super(),this.__layerClass=e,this.__sourceClass=t}connectedCallback(){super.connectedCallback(),customElements.whenDefined("vl-map-wms-style").then((()=>{this._source=this.__createSource(this.__sourceClass),this._layer=this.__createLayer(this.__layerClass)}))}get _url(){const e=this.getAttribute("data-vl-url");if(!e)throw new Error("URL not defined");return e}get _layers(){const e=this.getAttribute("data-vl-layers");if(!e)throw new Error("Layers not defined");return e}get _styles(){return this.getAttribute("data-vl-styles")||""}get _sldBody(){const e=this.querySelector(":scope > vl-map-wms-style");if(e)return e.sld}get _version(){return this.getAttribute("data-vl-version")||"1.3.0"}get _opacity(){return Number(this.getAttribute("data-vl-opacity")||1)}_createLayerConfig(e){return{title:this._name,source:e,opacity:this._opacity,minResolution:this._minResolution,maxResolution:this._maxResolution,visible:this._visible}}get _sourceConfig(){return{url:this._url,params:{LAYERS:this._layers,STYLES:this._styles,VERSION:this._version,SLD_BODY:this._sldBody}}}__createLayer(e){const t=new e(this._createLayerConfig(this._source));return t.set("id",VlMapLayer._counter),t}__createSource(e){return new e(this._sourceConfig)}}